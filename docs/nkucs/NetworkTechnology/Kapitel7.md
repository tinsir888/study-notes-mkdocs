---
title: 网络技术与应用 第七章 IP 地址与 ARP
author: tinsir888
date: 2021/11/15
cover: /img/nettech.jpg
tags:
  - 笔记
  - 计算机网络
categories:
  - 南开计科
  - 网络技术与应用课程笔记
abbrlink: 7823face
---

# IP 地址的作用

为什么需要 IP 地址？

- 屏蔽各种物理网络的地址差异

- 每种物理网络都有各自的技术特点，其物理地址也各不相同

- 统一物理地址的表示方法不现实

- 互联网对各种物理网络地址的“统一”通过IP地址在IP层完成

IP 地址的作用

- 指定计算机到互联网的一个连接
- 与互联网有多个物理连接的主机有多个 IP 地址
- 多个 IP 地址可绑定到一条物理连接上

多宿主主机——多块网卡的计算机

# IP 地址的组成

## IP 地址的层次结构

### IP 地址的组成

IP地址的长度为32位二进制数

网络号netid：标识互联网中一个特定网络

主机号hostid：标示网络中主机的一个特定连接

### IP 编制的特点

优点：IP编址方式携带了位置信息

- 给出IP地址就能知道它位于哪个网络

- 路由简单

缺点：主机在网络间移动，IP地址须跟随变化

## IP 地址的分类

书上144页

# 特殊的 IP 地址形式

## 网络地址

构成：一个有效的网络号和一个全“0”的主机号
例：IP地址为202.93.120.44的主机所处的网络为202.93.120.0，主机号为44

## 广播地址

直接广播：主机向其他网络的所有节点广播信息

- 构成：一个有效的网络号和一个全“1”的主机号
- 例：202.93.120.255
- 发送直接广播前需要知道目的网络的网络号

有限广播：将广播限制在最小的范围内

- 子网编址：广播被限制在本子网之中
- 构成：255.255.255.255
- 发送有限广播前不需要知道网络号

## 回送地址

127.0.0.0

作用：网络软件测试和本地机器进程间通信

含有网络号127的数据报不可能出现在网络上

# 编址实例

# 子网编址

IP地址可适应不同的网络规模

个人电脑普及使小型网络（特别是小型局域网络）越来越多

浪费IP地址（即使采用C类地址）

子网编址：克服IP地址浪费

## 编制方法

IP地址具有层次结构：网络号和主机号

子网编址方法

- 将IP地址的主机号部分进一步划分成子网部分和主机部分
- 从主机号部分“借”位并把它们指定为子网号部分
- 在“借”用时必须给主机号部分剩余2位
- 在“借”用时至少要借用2位

## 子网地址和子网广播地址

子网地址：以二进制全“0”结尾

子网直接广播地址：以二进制全“1”结尾

有限广播地址： 32比特全为“1”（广播被限制在本子网内）

RFC规定二进制全“0”或全“1”的子网号不应分配给实际的子网（但在实际应用中可以分配）

## 子网表示法—子网掩码法

子网掩码采用32位二进制数值

与IP地址的网络号和子网号相对应的位用“1”表示

与IP地址的主机号相对应的位用“0”表示

结合IP地址和其子网掩码可以判断IP地址的网络号、子网号和主机号

## 子网表示法—斜杠标记表示法

通过“IP地址/n”的方法表示，其中/n表示IP地址前n位为网络号和子网号

例如

- IP：128.22.25.6、子网掩码：255.255.255.0 >> 128.22.25.6/24

- IP：128.22.25.6，子网掩码：255.255.240.0 >> 128.22.25.6/20

## 无类别IP编址—子网编址的延伸

无类别IP编址抛弃了分类IP地址的概念

通过 “网络前缀”指定网络号部分

无类别IP编址可使用掩码或斜杠标记法表示

无类别IP编址方式是一种通用的IP编址方式：分类IP编址、子网编址都可通过其表示

优点：可按照网络的规模分配和申请IP地址、能在一定程度上减少路由表表项，提高路由转发速度

# 地址解析协议

IP地址屏蔽物理网络地址的差异，为上层用户提供“统一”的地址形式

IP地址屏蔽物理网络地址差异通过在物理网络上覆盖一层IP软件实现

互联网不对物理地址做任何修改

- 高层软件利用IP地址指定源地址和目的地址
- 低层物理网络利用物理地址指定源地址和目的地址

## IP地址映射到物理地址的实现方法

物理网络可以根据自身的特点选择适合的实现方法：静态表格、直接映射、动态映射等

以太网采用的方法：地址解析协议ARP

- ARP充分利用以太网的广播能力

## ARP 协议的基本思想

书上153页

## ARP 协议的改进

高速缓存技术

- 主机使用cache保存已知的ARP表项

- 主机获得其他IP地址与物理地址映射关系后存入该cache

- 发送时先检索cache，若找不到再利用ARP解析

- 利用计时器保证cache中ARP表项的“新鲜性”

其他改进技术

- 收到ARP请求后,目的主机将源主机的IP地址与物理地址的映射关系存入自己cache中

- 广播发送的ARP请求，所有主机都会收到。这些主机可将该映射关系存入各自的cache

- 主机启动时可主动广播自己IP地址与物理地址的映射关系

## 完整的 ARP 工作过程

书上154页

