---
title: 网络技术与应用 第六章 IP 数据报
author: tinsir888
date: 2021/11/09
cover: /img/nettech.jpg
tags:
  - 笔记
  - 计算机网络
categories:
  - 南开计科
  - 网络技术与应用课程笔记
abbrlink: 5d3a6ca1
---
# IP 数据报的格式

包含报头区和数据区

报头区：为了正确传输高层数据而增加的控制信息

数据区：高层传输的数据

## 报头区

1. 版本与协议：4/6
2. 长度：报头有两个表示长度的字段，一个表示报头长度，一个表示总长度
3. 服务类型：低延迟/高吞吐率/可靠性高
4. 生存周期
5. 头部校验和
6. 地址

## 数据区

包含上层的报头和报文

# IP 封装、分片与重组

## 分片

MTU 最大传输单元

## 重组

到目的主机才重组

## 分片控制

标识、标志和片偏移

一个片偏移对应8个字节

标志：是否已分片，是否是最后一片

# 数据报选项

主要用于控制和测试

用户可以使用也可以不使用 IP 选项，但所有实现 IP 协议的设备必须能处理 IP 选项

IP 数据报选项由选项码、长度和选项数据3部分组成

## 源路由选项

源路由：IP 数据报穿越互联网经过的路径是由源主机指定的

严格路由和松散路由

## 记录路由选项

记录 IP 数据报从源主机到目的主机所经过路径上的各个路由器 IP 地址

## 时间戳

# 差错与控制报文

IP 互联网利用 ICMP 传输控制报文和差错报文

## ICMP 差错报文

基本功能：提供差错报告，不规定采取什么处理方式

ICMP 差错报告采用路由器到源主机的模式

特点

- 作为一般数据传输，无优先级和可靠性
- 包含故障 IP 数据报数据区前 64 位数据
- 伴随抛弃出错 IP 数据报而产生

### 差错报告类型

- 目的地不可达报告
- 超时报告
- 参数错误报告

## ICMP 控制报文

### 拥塞控制与源抑制报文

拥塞：路由器被大量涌入的IP数据报淹没

源站抑制技术

### 路由控制与重定向报文

ICMP 重定向机制

## ICMP 请求/应答报文

ping 命令
