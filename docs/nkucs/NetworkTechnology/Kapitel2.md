---
title: 网络技术与应用 第二章 以太网
author: tinsir888
date: 2021/09/14
cover: /img/nettech.jpg
tags:
  - 笔记
  - 计算机网络
categories:
  - 南开计科
  - 网络技术与应用课程笔记
abbrlink: fdfb587b
---

# 共享式以太网

## 以太网

- 目前最具影响力的局域网，几乎占有有线局域网的所有市场

## 共享式以太网

- 拓扑构型：总线型和星型

- 结点通过相应的网络接口适配器直接连接到作为公共传输介质的总线上，信息的传输采用共享介质的方式

- 数据传输单位：帧

## 以太网帧结构

- 前导码 7B 和帧前定界符 1B
- 目的地址 6B 和源地址 6B 16进制表示
  - 硬件地址-MAC地址-物理地址-以太网地址
  - 48位组成
  - 单播地址（第一位为0）、多播地址（第一位为1）和广播地址（48位全为1）
- 长度/类型
  - 长度（小于0800H时表示）
  - 类型（大于等于0800H时表示）
- 数据
  - 最长1500B，最短46B
  - 不足46B的需要填充
  - 可变长度
- 帧校验码
  - 验证帧的正确性
  - 32位 CRC 校验

# 共享式以太网的介质访问控制方法

## 共享式以太网

- 数据传输方式：半双工
- 需要结局：共享介质网络中多结点同时发送产生的冲突问题——介质访问控制方法
- Ethernet 的介质访问控制方法：带有冲突检测的载波侦听多路访问（CSMA/CD）

## CSMA/CD 发送流程

- 先听后发
- 边听边发
- 冲突停止
- 延迟重发

## 冲突后的随机延迟

- 截断式二进制指数退避算法：$\rho=r*a$
  - r在$0$~$2^k-1$中随机选取
  - k=min(n, 10)，n代表冲突次数
  - a:冲突窗口
- 重发次数越大，后退延迟可选择的范围越大，选到较长延迟的可能性越大

## CSMA/CD 接受流程

- 地址匹配
  - 单播地址
  - 广播地址
  - 组播地址
- 抛弃
  - 冲突（信号畸变、短帧）
  - 地址不匹配

## 冲突窗口与帧最小长度

- 帧太短，有可能造成有些结点检测不到冲突

  发送信号传遍整个共享信道需要一定的时间

- 最小帧长度、最大覆盖范围与网络传输速率的关系

  $\tau=\frac{L_{max}}{V}$    $\frac{l_{min}}{v}>=2\tau=2*\frac{L_{max}}{V}$    $L_{max}<=\frac{l_{min}*V}{2v}$（V是无线电波传输速度，一般为常数）

- 传输速率v固定：覆盖范围$L_{max}$增大要求最小帧长度$l_{min}$相应地增大

- 最小帧长度$l_{min}$固定：传输速率v提高要求覆盖范围$L_{max}$相应减小

- 以太网最小帧长度512位 64字节

- 10Mpbs（2500m）—100Mpbs（200m）—1Gpbs（更小）

# 共享式以太网的组网部件

## 以太网相关标准

10Gpbs不支持共享介质方式

- 10Mpbs
  - 10BASE5 50Ω粗同轴电缆 总线
  - 10BASE2 50Ω细同轴电缆 总线
  - **10BASE-T 3类以上非屏蔽双绞线 星型**
- 100Mpbs
  - **100BASE-TX 5或6类非屏蔽双绞线 星型**
  - 100BASE-FX 光缆 星型
- 1Gpbs
  - 1000BASE-X 光缆或屏蔽双绞线 星型
  - 1000BASE-T 非屏蔽双绞线 星型

## 组网所需其间和设备

- 以太网集线器
- 网络接口卡
- 传输介质

## 10/100Mpbs 以太网集线器

- 功能
  - 以太网的集中连接点
  - 放大接受到的信号
  - 通过网络传输信号
- 不具有的功能
  - 过滤
  - 路径检测或交换
  - 不同速率的集线器级联

## 10/100Mpbs 网络接口卡

- 实现计算机与局域网传输介质之间的物理连接和电信号匹配，接受和执行计算机送来的各种控制命令，完成物理层共呢个
- 按照使用的介质访问控制方法，实现共享网络的介质访问控制，信息帧的发送与接受、差错校验等数据链路层的基本功能
- 提供数据缓存能力，实现无盘工作站的复位和引导
- 分类：10/100Mpbs 网卡、1Gpbs 网卡、自适应网卡

## 以太网传输介质

- 同轴电缆
  - 分类：粗（d=1cm，50Ω，500m）、细（d=0.5cm，50Ω，200m）
  - 优点：较优的频率和抗干扰特性，传输距离远。技术成熟
  - 缺点：电缆硬、不易弯折、重量重
  - 不适合用于楼宇内的结构化布线

- 非屏蔽双绞线

  - 优点：尺寸小，重量轻，易于弯曲，连接牢固，价格便宜，易于安装和维护

  - 缺点：抗干扰性差，带宽窄，传输距离短
  - 分类：5类线，6类线，4类线和3类线
  - 适合于楼宇内部的结构化布线

- 屏蔽双绞线

  - 优点：抗干扰能力强、尺寸和重量与 UTP 相当
  - 缺点：安装不适合会引入外界干扰

- 光缆
  - 优点：抗干扰能力强、传输速率高、传输损耗低、传输距离远
  - 缺点：价格相对较高，安装比较困难
  - 分类：单模光纤、多模光纤

# 非屏蔽双绞线与 UTP 电缆

## 非屏蔽双绞线

- 特点：尺寸小、重量轻、易于弯曲、连接牢固、价格便宜、容易安装和维护
- 通常由8芯导线组成，两两绞合成为4组 橙-橙白、绿-绿白、蓝-蓝白、棕-棕白
- UTP 电缆：连接设备时，非屏蔽双绞线两端需安装RJ-45接头（水晶头）

## UTP 电缆接头标准

### EIA/TIA-586A

- 绿白-1 绿色-2
- 橙白-3 蓝色-4
- 蓝白-5 橙色-6
- 棕白-7 棕色-8

### EIA/TIA-586B

- 橙白-1 橙色-2
- 绿白-3 蓝色-4
- 蓝白-5 绿色-6
- 棕白-7 棕色-8

## 设备接口的收发线对

- 主机以太网卡的收发线对：发送12，接收36
- 集线器收发线对：接收普通12级联36，发送普通36级联12

- 直通和交叉 UTP 电缆

# 共享式以太网组网规则

## 组网——单一集线器10M网

- 所需部件和设备

  - 10Mpbs 网卡（或10/100Mpbs 自适应网卡）
  - 3类以上的非屏蔽双绞线（每段最大长度不能超过100m）
  - 10BASE-T集线器

- 使用规模

  小型工作组规模，一般支持2-24台计算机连网

## 组网——多集线器级联

### 适用环境

- 计算机数超过单一集线器所能提供的端口数
- 计算机位置比较分散

### 集线器级联使用的电缆

- 上行端口与普通端口相连：直通 UTP 电缆
- 普通端口与普通端口相连：交叉 UTP 电缆
- 上行端口与上行端口相连：交叉 UTP 电缆

**利用集线器不能组成10M和100M混合网**

### 多集线器级联结构——平行式

### 多集线器级联结构——树型

## 多集线器 10M 以太网配置规则

- 10Mpbs 网卡（或10/100Mpbs 自适应网卡）
- 3类以上的非屏蔽双绞线（每段最大长度不能超过100m）
- 10BASE-T集线器
- 任意两个结点之间最多可以有5个网段，经过4个集线器
- 整个网络的最大范围为500米
- 网络中不能出现环路

## 多集线器 100M 以太网配置规则

- 100Mpbs 网卡（或10/100Mpbs 自适应网卡）
- 5类以上的非屏蔽双绞线（每段最大长度不能超过100m）
- 100BASE-T集线器
- 任意两个结点之间最多经过2个集线器
- 集线器之间电缆长度不能超过5米
- 整个网络覆盖范围最大205米
- 网络中不能出现环路

# 共享式以太网组网实验

## 共享式以太网组网实验所需设备和器件

略……

## 主要步骤

- 制作 UTP 电缆
- 安装以太网卡
- 主机接入网络

## 制作 UTP 电缆

- 外皮剥去12mm，按568B（推荐）或568A色彩排序非屏蔽双绞线
- 排号水晶头，用钳子压紧
- 利用电缆检测仪调试

## 安装以太网卡

- 网卡的配置：网卡使用的资源与主机其它设备不发生冲突
  - 需要配置的参数：中断、DMA通道、I/O基地址、存储基地址
  - 配置方法：拨动开关、软件
  - 自动配置：即插即用
- 注意：打开主机机箱前，一定要切断主机的电源

## 主机接入网络

## 网络连通性测试

- 观察集线器和网卡状态指示灯的变化
- 运行网卡自带的测试和诊断软件

- 用 ping 命令
  - 网卡驱动程序：实现网络操作系统上层程序与网卡的接口
  - TCP/IP 模块：互联层与传输层协议

- 使用手动模式配置 IP 地址

# 共享式以太网组网仿真实验

## 实验环境

- 真实环境
- 仿真环境
  - 华为：eNSP
  - 思科：Packet Tracer

## Packet Tracer 界面——工作区模式选择栏

- Logical：显示各个设备的逻辑连接状况和拓扑结构
- Physical：显示设备在各个设备建、建筑物和城市中的物理位置

## Packet Tracer 界面——设备选择区

- 设备类型
- 设备子类型
- 设备

## Packet Tracer 界面——公共工具栏

## Packet Tracer 界面——仿真类型

- Realtime 实时
- Simulation 模拟

## 单集线器以太网组网

……实验课上看老师演示
